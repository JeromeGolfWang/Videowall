<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grok Videos</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:#000; font-family:system-ui,sans-serif; padding-top:120px; }
    
    .header {
      position:fixed;
      top:0;
      left:0;
      right:0;
      background:#111;
      border-bottom:1px solid #333;
      padding:1.5rem;
      z-index:1000;
    }
    .header h1 {
      color:white;
      font-size:1.5rem;
      font-weight:400;
      text-align:center;
      margin-bottom:1rem;
    }
    .controls {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:1rem;
      color:white;
    }
    .controls label {
      font-size:0.9rem;
    }
    .controls input[type="range"] {
      width:200px;
      height:6px;
      -webkit-appearance:none;
      appearance:none;
      background:#333;
      border-radius:3px;
      outline:none;
    }
    .controls input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance:none;
      appearance:none;
      width:18px;
      height:18px;
      background:white;
      border-radius:50%;
      cursor:pointer;
    }
    .controls input[type="range"]::-moz-range-thumb {
      width:18px;
      height:18px;
      background:white;
      border-radius:50%;
      cursor:pointer;
      border:none;
    }
    .controls .value {
      font-weight:bold;
      min-width:45px;
    }
    .gallery {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
      column-gap:1rem;
      row-gap:1rem;
      padding:1rem;
      max-width:1400px;
      margin:0 auto;
      transition:grid-template-columns 0.3s ease, row-gap 0.3s ease;
    }
    .video-card {
      border-radius:12px;
      overflow:hidden;
      position:relative;
      background:#111;
    }
    .video-card video {
      width:100%;
      aspect-ratio: 8/11;
      object-fit:cover;
      display:block;
      background:#111;
    }
    .error-msg {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      color:#ff4444;
      padding:1rem;
      text-align:center;
      font-size:0.85rem;
      display:none;
    }
    .video-card.error .error-msg {
      display:block;
    }
    @media (max-width:600px) { 
      .gallery { grid-template-columns:1fr; } 
    }
  </style>
</head>
<body>

  <div class="header">
    <h1>Blank Slate Imagination</h1>
    <div class="controls">
      <label for="sizeSlider">Video Size:</label>
      <input type="range" id="sizeSlider" min="30" max="100" value="100" step="5">
      <span class="value" id="sizeValue">100%</span>
    </div>
  </div>

  <section class="gallery" id="gallery"></section>

  <script>
    const videos = [
      'videos/grok-video-78de01e8-249c-4aea-9495-958f7744ad29.mp4',
      'videos/grok-video-665c7a51-fbd6-4fda-a799-ffb605c92676.mp4',
      'videos/grok-video-fa22a5af-cdcf-4c31-8b56-3bc8cc3bf43d.mp4',
      'videos/grok-video-d34887ea-b3ec-473b-a6c3-eebc1d9349c1.mp4',
      'videos/grok-video-4e9dd6e0-669f-4b97-996c-d376d4cb2865.mp4',
      'videos/grok-video-d743a6ad-1f23-4dde-9fed-a915392b09c2.mp4',
      'videos/grok-video-8e72aae3-f2f1-4e5b-93d8-8ba3c3ecf9a7.mp4',
      'videos/grok-video-3be23500-1265-43d9-9223-e9a35b2263dd.mp4',
      'videos/grok-video-8c428203-18b4-4368-b79f-2f9aea409646.mp4',
      'videos/grok-video-3c90d147-7961-4289-a84c-39d10d7c8773.mp4',
      'videos/grok-video-e23d6513-4254-48aa-a5b0-1c33affe38ca.mp4',
      'videos/grok-video-ed478be3-bcf3-4baa-9cad-dbe52a0f9aa1.mp4',
      'videos/grok-video-c579279b-a5cc-44ed-9fe2-74539e876ec0.mp4',
      'videos/grok-video-0ae3c481-6636-4fc5-84c0-4406fee3acf4.mp4',
      'videos/grok-video-88c58cb7-de16-4ac3-91d8-5198e11e2f4e.mp4',
      'videos/grok-video-8e9bd627-7797-4321-8c8d-ed1430914230.mp4',
      'videos/grok-video-d36cc436-cb83-43e5-8905-cec31d90362c.mp4',
      'videos/grok-video-ce1e4ffe-587b-4430-a7eb-b483be5b3967.mp4',
      'videos/grok-video-208d5ddc-06f9-4ac6-bb62-4266269b4136.mp4',
      'videos/grok-video-520d7680-1f2b-477c-b956-9a36f12c05cc.mp4',
      'videos/grok-video-bbd24057-d86e-4aed-bc95-ac9d2518346a.mp4',
      'videos/grok-video-734ab46b-f28c-490b-bda1-57ee51af2250.mp4',
      'videos/grok-video-3444bb24-f7f7-459e-ac73-b8d4c58bd50b.mp4',
      'videos/grok-video-b75f9277-8cea-4c30-bc69-cbe9eba6ce41.mp4',
      'videos/grok-video-e42f6385-7704-4d62-b6e5-b6a170ded3ad.mp4'
    ];

    const gallery = document.getElementById('gallery');
    const sizeSlider = document.getElementById('sizeSlider');
    const sizeValue = document.getElementById('sizeValue');

    // Update video sizes
    sizeSlider.addEventListener('input', (e) => {
      const size = e.target.value;
      const minSize = Math.floor(280 * (size / 100));
      // Use a smaller multiplier for row gap to keep it tighter at small sizes
      const rowGap = Math.max(2, Math.floor(8 * (size / 100))); // Min 2px, scales with size
      sizeValue.textContent = size + '%';
      gallery.style.gridTemplateColumns = `repeat(auto-fit, minmax(${minSize}px, 1fr))`;
      gallery.style.rowGap = `${rowGap}px`;
    });

    // Intersection Observer for lazy loading
    const observerOptions = {
      root: null,
      rootMargin: '100px',
      threshold: 0
    };

    const videoObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const video = entry.target;
        
        if (entry.isIntersecting) {
          if (!video.src) {
            video.src = video.dataset.src;
            video.load();
          }
          video.play().catch(() => {});
        } else {
          video.pause();
        }
      });
    }, observerOptions);

    // Create video cards
    videos.forEach((src) => {
      const card = document.createElement('div');
      card.className = 'video-card';
      
      const video = document.createElement('video');
      video.muted = true;
      video.loop = true;
      video.playsInline = true;
      video.setAttribute('playsinline', '');
      video.preload = 'none';
      video.dataset.src = src;
      
      const errorMsg = document.createElement('div');
      errorMsg.className = 'error-msg';
      errorMsg.textContent = `Failed to load video`;
      
      video.addEventListener('error', () => {
        card.classList.add('error');
        console.error(`Failed to load video: ${src}`);
      });
      
      videoObserver.observe(video);
      
      card.appendChild(video);
      card.appendChild(errorMsg);
      gallery.appendChild(card);
    });

    // Enable playback on user interaction
    let interacted = false;
    const enablePlayback = () => {
      if (interacted) return;
      interacted = true;
      
      document.querySelectorAll('video').forEach(v => {
        const rect = v.getBoundingClientRect();
        const inViewport = rect.top < window.innerHeight && rect.bottom > 0;
        if (inViewport && v.src) {
          v.play().catch(() => {});
        }
      });
    };
    
    document.addEventListener('click', enablePlayback, { once: true });
    document.addEventListener('touchstart', enablePlayback, { once: true });
  </script>
</body>
</html>